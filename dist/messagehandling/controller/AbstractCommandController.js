"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AbstractCommandController = void 0;
class AbstractCommandController {
    constructor({ logger, validator, commandName, }) {
        this.LOG = logger;
        this.validator = validator;
        this.handlesCommandName = commandName;
    }
    async handleMessage(message) {
        await this.preExecute(message);
        const command = this.validator.transformAndValidate(message.payload);
        let response = await this.execute(command);
        response = await this.postExecute(message, response);
        return response;
    }
    canHandle(message) {
        return message.commandName === this.handlesCommandName;
    }
    async preExecute(message) { }
    async postExecute(message, response) {
        return response;
    }
}
exports.AbstractCommandController = AbstractCommandController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWJzdHJhY3RDb21tYW5kQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tZXNzYWdlaGFuZGxpbmcvY29udHJvbGxlci9BYnN0cmFjdENvbW1hbmRDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQVFBLE1BQXNCLHlCQUF5QjtJQUs3QyxZQUFzQixFQUNwQixNQUFNLEVBQ04sU0FBUyxFQUNULFdBQVcsR0FLWjtRQUNDLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxXQUFXLENBQUM7SUFDeEMsQ0FBQztJQUVELEtBQUssQ0FBQyxhQUFhLENBQUMsT0FBMEI7UUFDNUMsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JFLElBQUksUUFBUSxHQUFNLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNyRCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBSUQsU0FBUyxDQUFDLE9BQTBCO1FBQ2xDLE9BQU8sT0FBTyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDekQsQ0FBQztJQUVTLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBMEIsSUFBa0IsQ0FBQztJQUU5RCxLQUFLLENBQUMsV0FBVyxDQUFDLE9BQTBCLEVBQUUsUUFBVztRQUNqRSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUF0Q0QsOERBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZE1lc3NhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29tbWFuZE1lc3NhZ2VDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uLy4uL2NvbW1hbmRcIjtcbmltcG9ydCB7IE1lc3NhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vTWVzc2FnZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IENvbW1hbmRNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL21lc3NhZ2luZy9Db21tYW5kTWVzc2FnZVwiO1xuaW1wb3J0IHsgQ29tbWFuZENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db21tYW5kQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uLy4uL2xvZ2dpbmdcIjtcbmltcG9ydCB7IENvbW1hbmRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29tbWFuZFZhbGlkYXRvclwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RDb21tYW5kQ29udHJvbGxlcjxQIGV4dGVuZHMgQ29tbWFuZCwgUj5cbiAgaW1wbGVtZW50cyBDb21tYW5kQ29udHJvbGxlcjxQLCBSPiwgTWVzc2FnZUNvbnRyb2xsZXI8Q29tbWFuZE1lc3NhZ2U8UD4sIFAsIFI+IHtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IExPRzogTG9nZ2VyO1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbGlkYXRvcjogQ29tbWFuZFZhbGlkYXRvcjxQPjtcbiAgcHJpdmF0ZSByZWFkb25seSBoYW5kbGVzQ29tbWFuZE5hbWU6IHN0cmluZztcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHtcbiAgICBsb2dnZXIsXG4gICAgdmFsaWRhdG9yLFxuICAgIGNvbW1hbmROYW1lLFxuICB9OiB7XG4gICAgbG9nZ2VyOiBMb2dnZXI7XG4gICAgdmFsaWRhdG9yOiBDb21tYW5kVmFsaWRhdG9yPFA+O1xuICAgIGNvbW1hbmROYW1lOiBzdHJpbmc7XG4gIH0pIHtcbiAgICB0aGlzLkxPRyA9IGxvZ2dlcjtcbiAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgICB0aGlzLmhhbmRsZXNDb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lO1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlTWVzc2FnZShtZXNzYWdlOiBDb21tYW5kTWVzc2FnZTxQPik6IFByb21pc2U8Uj4ge1xuICAgIGF3YWl0IHRoaXMucHJlRXhlY3V0ZShtZXNzYWdlKTtcbiAgICBjb25zdCBjb21tYW5kID0gdGhpcy52YWxpZGF0b3IudHJhbnNmb3JtQW5kVmFsaWRhdGUobWVzc2FnZS5wYXlsb2FkKTtcbiAgICBsZXQgcmVzcG9uc2U6IFIgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoY29tbWFuZCk7XG4gICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBvc3RFeGVjdXRlKG1lc3NhZ2UsIHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICBhYnN0cmFjdCBleGVjdXRlKGNvbW1hbmQ6IFApOiBQcm9taXNlPFI+O1xuXG4gIGNhbkhhbmRsZShtZXNzYWdlOiBDb21tYW5kTWVzc2FnZTxQPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBtZXNzYWdlLmNvbW1hbmROYW1lID09PSB0aGlzLmhhbmRsZXNDb21tYW5kTmFtZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBwcmVFeGVjdXRlKG1lc3NhZ2U6IENvbW1hbmRNZXNzYWdlPFA+KTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHByb3RlY3RlZCBhc3luYyBwb3N0RXhlY3V0ZShtZXNzYWdlOiBDb21tYW5kTWVzc2FnZTxQPiwgcmVzcG9uc2U6IFIpOiBQcm9taXNlPFI+IHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbn1cbiJdfQ==